% !TEX encoding = UTF-8 Unicode
\documentclass[a4paper]{article}

\usepackage{color}
\usepackage{url}
\usepackage[T2A]{fontenc} % enable Cyrillic fonts
\usepackage[utf8]{inputenc} % make weird characters work
\usepackage{graphicx}

\usepackage[english,serbian]{babel}
%\usepackage[english,serbianc]{babel} %ukljuciti babel sa ovim opcijama, umesto gornjim, ukoliko se koristi cirilica

\usepackage[unicode]{hyperref}
\hypersetup{colorlinks,citecolor=green,filecolor=green,linkcolor=blue,urlcolor=blue}

\usepackage{listings}
\usepackage{verbatimbox,lipsum}

%\newtheorem{primer}{Пример}[section] %ćirilični primer
\newtheorem{primer}{Primer}[section]

\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}

\lstset{ 
  backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}; should come as last argument
  basicstyle=\scriptsize\ttfamily,        % the size of the fonts that are used for the code
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{mygreen},    % comment style
  deletekeywords={...},            % if you want to delete keywords from the given language
  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  firstnumber=1   ,                % start line enumeration with line 1000
  frame=single,	                   % adds a frame around the code
  keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
  keywordstyle=\color{black},       % keyword style
  language=Python,                 % the language of the code
  morekeywords={*,...},            % if you want to add more keywords to the set
  numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
  numbersep=5pt,                   % how far the line-numbers are from the code
  numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
  rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
  stepnumber=1,                    % the step between two line-numbers. If it's 1, each line will be numbered
  stringstyle=\color{mymauve},     % string literal style
  tabsize=2,	                   % sets default tabsize to 2 spaces
  title=\lstname                   % show the filename of files included with \lstinputlisting; also try caption instead of title
}

\begin{document}

\title{Optimizacija kolonijom pčela\\ \small{Seminarski rad u okviru kursa\\Metodologija stručnog i naučnog rada\\ Matematički fakultet}}

\author{Maja Vukolić, Marija Marković, Lea Petković, Marina Pilipović\\ vukolic.maja97@gmail.com, markovic.n.maja@gmail.com,\\
lea.bela.97@gmail.com, marinamejl@gmail.com}

%\date{9.~april 2015.}

\maketitle

\abstract{
U ovom tekstu je ukratko prikazana osnovna forma seminarskog rada. 
\tableofcontents

\newpage

\section{Uvod}
\label{sec:uvod}
Priroda je inspirisala mnoštvo naučnih istraživanja, a i dalje je ostalo dosta toga neistraženog. Danas, većina novih algoritama inspirisana su prirodnim procesima, razvijeni tako što crpe inspiraciju iz prirode.

Među ovakvim algoritmima, specijalnu klasu algoritama predstavljaju oni koji su razvijeni tako što su inspirisani inteligencijom roja (eng. swarm intelligence). Bonabeau je definisao inteligenciju roja kao "svaki pokušaj dizajniranja algoritama ili distribuiranih uređaja za rešavanje problema inspirisanih kolektivnim ponašanjem društvenih kolonija insekata i drugih društava životinja"\cite{uvod}. Pojam "roj" se odnosi na bilo kakvu suzdržanu zbirku interaktivnih agenata ili pojedinaca.
Klasičan primer roja su pčele koje se kreću oko svoje košnice. Ipak, metafora se lako može proširiti na druge sisteme sa sličnom arhitekturom (kolonija mrava se može smatrati rojem čiji su pojedini agensi mravi, slično i za jato ptica). Ovakvi algoritmi, oni koji su zasnovani na inteligenciji roja, su najpopularniji, a njihovi najpoznatiji predstavnici su: Optimizacija mravljim kolonijama {\em(eng. Ant Colony Optimization, ACO)}, optimizacija kolonijom pčela {\em(eng. Bee Colony Optimization, BCO)}, optimizacija rojevima čestica {\em(eng. Particle Swarm Optimization, PSO)}.
Ideja, koja se koristi, je uzeti primer iz prirode, odabrati ključne komponente koje su zaslužne za njegovu uspešnost, i na osnovu toga stvoriti model koji je prilagođen računaru i potrebama naših zadataka. U nastavku ćemo ovakav postupak primeniti nad pčelama.

U ovom radu se daje kartak teorijski uvod u pčelinji algoritam (eng. Bees algorithm) opisan u poglavlju 2. U poglavlju 3 je dat kratak osvrt na to kako se modifikovao algoritam optimizacije rojem pčela za različite svrhe.
Izvedeno programsko rešenje opisano je u poglavlju 4, dok su u poglavlju 5 dati primeri primena ovog algoritma na realne probleme.


\section{Pčele i strategija}
\label{subsec: ponasanje}
Pčele se prema ulozi koje imaju dele na: matice, trutove i radilice. Kako autorima rada u algoritmu stvaranje pčela nije od značaja, akcenat se stavlja na treću vrstu – radilice. Postoje dva tipa radilica: ižviđači (engl. scout bees) i sakupljači (engl. forager bees). 

\begin{figure}[h!]
\begin{center}
\includegraphics[scale=0.07]{Honey_Bee_takes_Nectar.jpg}
\end{center}
\caption{Pčela ,,sakupljač'' prilikom sakupljanja nektara.}

\label{fig:pcela1}
\end{figure}

Izviđači konstantno pretražuju okruženje tražeći nove izvore nektara. Kreću se nasumično u okolini košnice, procenjujući vrednost resursa na koje naiđu. Kada pronađu izvor hrane, vraćaju se u košnicu, odlaze u deo koji se naziva ,,podijum za igru'' i izvode pčelinji ples, prikazan na slici \ref{fig:pcela2}. Pomoću ovog plesa objašnjavaju drugim pčelama put do novog izvora hrane. Nakon toga, one se vraćaju na izvor, ali sada u pratnji drugih pčela. Broj pčela koji će im se pridružiti zavisi od kvaliteta poruke koju prenose. Zahvaljujući ovom procesu, kolonija je u stanju da se fokusira samo na najvrednije izvore hrane.

Prirodno se nameće da je broj sakupljača mnogo veći od broja izviđača. Sakupljači na osnovu izvedenog plesa odlučuju da li će poći do izvora hrane ili ne. Zainteresovane pčele kreću na put. Takođe, pčela izviđač je, osim putanje, prenela i miris cveta na kom je bila, čime sakupljači znaju da se nalaze na pravom putu.

\subsection{Pčelinji ples}
\label{subsec:pcelinji ples}

	Nemački zoolog Karl Von Frisch je 1973. otkrio da pčele među sobom komuniciraju plesom (engl. waggle dance). Na tkzv. ,,plesnom podijumu'' u košnici izviđači prenose poruku u dve faze:
\begin{itemize}\itemindent50pt%
\setlength{\labelsep}{10pt}
	\item migoljenje
	\item kružni povratak, prvo u jednu, a zatim u drugu stranu
\end{itemize}
Na ovaj način se kodiraju: smer, udaljenost i kvalitet izvora hrane, a pčele koje nikad nisu napuštale košnicu tačno znaju gde treba da idu.

Najsloženiji podatak je {\em smer}. Pčele koriste položaj Sunca, odnosno, ugao pod kojim izvodi ples označava ugao u odnosu na pravac Sunca pod kojim pčele treba da krenu ka izvoru - cvetu. Ovo je prikazano na slici \ref{fig:pcela2}:

\begin{figure}[h!]
\begin{center}
\includegraphics[scale=0.45]{waggle_dance.png}
\end{center}
\caption{Ples pčele koji vrši u košnici, kako bi ukazala drugim pčelama na smer i udaljenost izvora hrane.}
\label{fig:pcela2}
\end{figure}

{\em Udaljenost} izvora se određuje na osnovu krive koju pčela izviđač opisuje prilikom plesa. Ako kruži, izvor se nalazi u radijusu od 50m. Ako je kriva u obliku znaka beskonačno, onda je izvor dalji od 150m; dok je u preostalim slučajevima izvor na udaljenosti između 50m i 150m\cite{plespcela}.

Brzina i vreme trajanja plesa je proporcionalno oceni resursa pčele izviđača. Drugi izviđači takođe mogu opisivati isti izvor nektara. {\em Kvalitet} je veći što je veći broj pčela koje oglašavaju za jedan isti izvor, a samim tim sa njima će poći veći broj sakupljača\cite{bcoalg}. Dokle god se smatraju vrednim, izvori hrane će "reklamirati" pčele sakupljači kroz ples u košnici. Novi regruti mogu takođe učestvovati u plesu i na taj način pozivati što više novih pčela da se priključe sakupljanju. 



\section{Istorija algoritma}
U periodu 1999-2003, srpski akademici - Panta Lučić i Dušan Teodorović, predstavili su osnovne koncepte optimizacije kolonijom pčela (engl. bee colony optimization, BCO) kroz sistem pčela (engl. bee system) dok su vršili istraživanja u {\em Virginia Tech}\cite{algoritam}. Optimizacija kolonijom pčela uvedena je 2005. godine kao metaheuristika za rešavanje problema uparivanja putovanja. Iste godine su Drias i
Yahi modifikovali algoritam optimizacije rojem pčela (engl. bee swarm optimization) za
problem MAX-W-SAT (engl. maximum weighted satisfiability problem). Takođe, D. T. Pham uvodi pčelinji algoritam (engl. bees algorithm) koji kombinuje
pretraživanje susedstva i nasumično pretraživanje.\cite{istorijat} Dok računarski inženjer D. Karaboga uvodi algoritam veštačke kolonije pčela (engl. artificial bee colony, ABC) prvenstveno
namenjen numeričkoj optimizaciji.


\section{Pčelinji algoritam}
Pčelinji algoritam je metod pretrage koji oponaša kolonije pčela prilikom potrage za hranom\cite{sajt_algoritma}. Profesor D. T. Pham, zajedno sa svojim saradnicima, je napravio i opisao algoritam 2005. godine.
U svojoj osnovnoj verziji izvršava pretraživanje susedstva u kombinaciji sa globalnim pretraživanjem, i može se upotrebiti i za kombinatornu i za kontinuiranu optimizaciju. Koristi populaciju ageansa, odnosno veštačkih pčela, kako bi uzorkovao prostor rešenja. Pčele izviđači nasumično traže regione visoke funkcije prilagođenosti (globalna pretraga). Najuspešniji izviđači regrutuju promenljiv broj pčela koje tragaju za hranom kako bi pretraživali u okolini najboljih rešenja (lokalna pretraga).
Ciklusi globalne i lokalne pretrage ponavljaju se dok se ne otkrije prihvatljivo rešenje ili ne prođe određeni broj iteracija. Efikasnost ovog algoritma se pokazala u mnogim istraživanjima. 
Među najpoznatijim pčelinjim algoritmima nalazi se \textbf{BCO (engl. Bee Colony Optimization)}.

\subsection{BCO algoritam}
\label{subsec:bco}
Optimizacija rojem pčela je zasnovana na analogiji između prirodnog ponašanja pčela u potrazi za nektarom i ponašanja optimizacionih algoritama u potrazi za optimumom\cite{bcoalg}. Ova metaheuristika je zasnovana na pretraživanju populacije. 

Postoje 2 osnovna pristupa BCO algoritma:
\begin{itemize}\itemindent20pt%
\setlength{\labelsep}{10pt}
	\item Konstruktivni BCO - zasnovan na koracima izgradnje, gde pčele grade rešenje korak po korak
	\item BCOi - zasnovan na poboljšanju celovitih rešenja kako bi se dobila što bolja konačna rešenja \cite{bcoalg}
\end{itemize}

Potrebno je napraviti koloniju veštačkih pčela koje bi tražile dobra rešenja problema u prostoru pretrage. Kako bi kvalitet dobijenih rešenja bio bolji, pčele sarađuju i razmenjuju informacije. Na ovaj način pčele su skoncentrisane na rešenja koja više obećavaju, te postepeno generišu i poboljšavaju pronađena rešenja (sve dok nije postignut zadati kriterijum zaustavljanja).
Opšti algoritam dat je u nastavku:

\begin{lstlisting}[caption={Pseudokod {\em BCO} algoritma \cite{algoritam} },frame=single, label=simple]
// B - broj pcela ukljucenih u pretragu
// N - broj letova od kosnice do cveta i nazad 
	     u jednoj BCO iteraciji

// Inicijalizacija: Dodeljuju se vrednosti promenljivama B i N, 
		 		       odredjuje se kriterijum zaustavljanja

do:
    (1) Dodeli prazno resenje svakoj pceli
    (2) for (k = 0; k < N; k++):
    		// let unapred
    		(a) for (i = 0; i < B; i++):
    			    for (j = 0; j < f(N); j++):
    					 (i)  Proceni sve mogucnosti;
    					 (ii) Izaberi naredni korak koristeci pravila 
    					      ruleta;
    		// let unazad
    		(b) for (i = 0; i < B; i++):
    			    Proceni kvalitet (parcijalnog/celokupnog) 
    			    resenja	za trenutnu pcelu;
    		(c) for (i = 0; i < B; i++):  
    		    	Odrediti lojalnost na osnovu pravila ruleta
    		    	trenutne pcele i;
		    (d) for (i = 0; i < B; i++):
		       		Ako pceli i kojoj nije dodeljeno resenje, 
		       		pravilom ruleta izaberi resenje;
    (3) Uporedi sva resenja i izaberi najbolje
        Azuriraj x_best i f(x_best) dok kriterijum zaustavljanja
        ne bude zadovoljen
    
while (nije zadovoljen kriterijum)
\end{lstlisting}

Populacija se sastoji od {\em B} veštačkih pčela. Svaka od njih zadužena je za proizvodnju jednog rešenja. Različite putanje koje pčele prelaze predstavljaju različita rešenja. Algoritam ima dve faze - \textbf{let unapred} i \textbf{let unazad}. Navedene faze dešavaju se naizmenično.

Kod leta unapred, pčele pretražuju prostor pretrage. Postoji unapred definisani broj koraka koji izgrađuju i/ili poboljšavaju rešenje, koje onda postaje bolje rešenje. Zatim se započinje se s letom unazad.

Kod leta unazad, svaka pčela deli informaciju o kvalitetu svog parcijalnog/celokupnog rešenja. Do optimalnog rešenja dolazi se izračunavanjem funkcije cilja za svako parcijalno/celokupno rešenje, što je analogno plesu pčela u prirodi. Nakon što su rešenja evaluirana, svaka pčela odlučuje (s određenom verovatnoćom) da li će ostati pri svom rešenju ili ne. Pčele koje su pronašle bolja rešenja imaju veće šanse da ih zadrže i reklamiraju. Za razliku od pčela u prirodi, u algoritmu - druge pčele će razmatrati rešenja kao potencijalno dobra, onih pčela koje su ostale verne svojim rešenjima. Kad god neka pčela odbaci svoje rešenje, mora da izabere jedno od reklamiranih rešenja. Pčela donosi odluku sa određenom verovatnoćom - tako da bolja rešenja imaju veće šanse da budu izabrana za naredne korake. Na ovaj način, pri svakom letu unazad, sve pčele se dele u dve grupe. Prvu grupu čine pčele regruteri {\em R}, a drugu neopredeljene pčele {\em B - R}. Vrednosti broja regrutera i neopredeljenih pčela se menjanju od iteracije do iteracije (jednog leta unazad do drugog leta unazad). 

U narednom letu unapred, prema konstruktivnom BCO-u, svaka pčela dodaje novu komponentu na pre generisano delimično rešenje. Kod BCOi-a pčele menjaju delove celokupnog rešenja kako bi se postigla rešenja što većeg kvaliteta.

Faze leta unapred i leta unazad se smenjuju {\em N} puta, dok svaka pčela ne izgradi sopstveno rešenje ili ne uradi izmenu rešenja. {\em N} je predstavlja parametar koji služi za definisanje učestalosti komunikacije između pčela. Kada se izvrši {\em N} iteracija/koraka, određuje se najbolje rešenje od svih mogućih {\em B} rešenja. To rešenje se posle koristi pri ažuriranju globalno najboljeg rešenja. Ovime je iteracija algoritma gotova i brišu se svih {\em B} rešenja, te započinje nova iteracija.

Sve dok kriterijum zaustavljanja nije ispunjen, vrše se iteracije. Mogući kriterijumi zaustavljanja mogu biti maksimalan/zadati broj iteracija ili maksimalan broj iteracija bez poboljšanja funkcije cilja.
Najbolje pronađeno rešenje se daje kao konačno. To rešenje i globalno rešenje.

\subsubsection{Lojalnost pčele}
\label{subsubsec:lojalnost}

Nakon završetka leta unapred, svaka pčela odlučuje da li će ostati verna prethodno pronađenom rešenju ili ne. Ova odluka zavisi od trenutnog kvaliteta rešenja pčele u odnosu na rešenja ostalih pčela. Verovatnoća da je pčela {\em i} lojalna svom prethodnom parcijalnom/celokupnom rešenju, na početku novog leta unapred, opisana je formulom:\\

$p_i^{u+1}=e^{-\frac{O_{max}-O_i}{u}}$ \hfill (*)\\                             

$O_i$ - normalizovana vrednost funkcije parcijalnog/celokupnog rešenja
\item $O_{max}$ - maksimalna vrednost svih normalizovanih
\item u - brojač letova unapred (1, 2, ..., N)\\
     U zavisnosti da li nam treba minimalna ili maksimalna funkcija, normalizacija 
se izvodi na sledeći način:
\item$O_i=\frac{C_{max}-C_i}{C_{max}-C_{min}}$ za minimizaciju\\
\item$O_i=\frac{C_i-C_{max}}{C_{max}-C_{min}}$ za maksimizaciju\\
gde $C_i$ označava ciljnu vrednost funkcije i-tog pčelinjeg rešenja. \\

Lojalnost pčele zavisi od formule (*), kao i generatora slučajnih brojeva. Ako je slučajni broj manji od izračunate vrednosti, pčela ostaje pri svom rešenju. U suprotnom, neopredeljena je\cite{algoritam}.


\subsubsection{Regrutacija}
\label{subsubsec:regrutacija}

Za svaku neopredeljenu pčelu, treba odrediti kog regruta će slediti. Pritom, uzima u obzir kvalitet reklamiranih rešenja. Verovatnoća da će i-to parcijalno/celokupno rešenje izabrati neopredeljene pčele je: \\

$p_i = \frac{Q_i}{\sum_{k=1}^{R}(Q_k)},	i = 1, 2, . . . R$ \\

Gde je {\em $Q_k$} normalizovana vrednost funkcije cilja k-tog reklamiranog rešenja. {\em R} je broj regrutera. Svaka neopredeljena pčela se pridružuje jednom od regrutera preko ruleta.


\section{Primene algoritma}
Ovaj algoritam našao je mnoge primene u inžinjerstvu:

\begin{itemize}
	\item{Optimizacija klaster sistema}
	\item{Manufaktura} 
	\item{Upravljanje}
	\item{Bioinžinjering}
	\item{Ostali problemi optimizacije}
	\item{Više-objektivna optimizacija}
\end{itemize}


\subsection{Prva primena}
\label{subsec:prvaprimena}

\subsection{Druga primena}
\label{subsec:drugaprimena}


\section{Zaključak}
\label{sec:zakljucak}
Optimizacija kolonije pčela je metaheuristička metoda inspirisana ponašanjem pčela i najmlađa tehnika inteligencije roja. Predstavlja opšti algoritam koji se može primeniti na različite probleme optimizacije u upravljanju, inženjeringu i kontroli. Ovaj opšti algoritam uvek mora da bude prilagođen za određeni problem. Pristup BCO zasnovan je na konceptu saradnje, koja omogućava veštačkim pčelama da budu efikasnije i da postižu ciljeve koje ne bi mogle pojedinačno da postignu. BCO ima mogućnost da putem razmene informacija i regrutovanja intenzivnije vrši pretragu u onim regionima prostora rešenja koji više obećavaju. BCO nije široko korišćen za rešavanje stvarnih problema. U ovom trenutku nema teorijskih rezultata koji bi mogli podržati koncepte BCO. Obično je razvoj različitih pristupa inteligenciji roja zasnovan na eksperimentalnom radu u početnoj fazi. Dobri eksperimentalni rezultati trebalo bi da motivišu istraživače da pokušaju da proizvedu neke teorijske rezultate u budućem istraživanju. 

Preliminarni rezultati su pokazali da razvoj novih modela zasnovanih na principima BCO (autonomija, distribuirano funkcionisanje, samoorganizovanje) verovatno može značajno doprineti rešavanju složenih problema inženjeringa, upravljanja i kontrole. U narednim godinama može se očekivati više modela zasnovanih na BCO-u. Najvažniji aspekt budućeg istraživanja je matematičko opravdanje tehnike BCO. Ostali zanimljivi aspekti budućeg istraživanja mogu biti homogenost pčela (homogena nasuprot heterogenim veštačkim pčelama), različiti mehanizmi razmene informacija i različiti mehanizmi saradnje\cite{bcoalg}. 

\newpage
\addcontentsline{toc}{section}{Literatura}
\appendix
\bibliography{seminarski} 
\bibliographystyle{plain}



\end{document}
